import { IExpress, QueryParam, ExpressInfo, ExpressHandlerOption } from './express';
import { Observable } from 'rxjs';
import { RxRedis } from 'redis-observable';
import * as redis from 'redis';
export declare type ExpressCreator = {
    new (option: {
        redis: RxRedis;
        config: ExpressHandlerOption<any>;
    }): IExpress<any, any>;
};
export declare type ExpressOption<O> = O extends {
    new (option: {
        redis: RxRedis;
        config: infer X;
    }): IExpress<any, any>;
} ? X : any;
export declare class Dispatcher {
    private handlers;
    private constructor();
    private static redis;
    private static instance;
    static register: <P extends ExpressCreator>(creator: P, config: ExpressOption<P>) => void;
    static create: (redisOpt: redis.ClientOpts) => Dispatcher;
    private chose;
    query: (param: QueryParam, handler_name?: string, force?: boolean) => Observable<ExpressInfo<any>>;
    getHandlerName: () => string[];
    getHandler: (handler_name: string) => IExpress<any, any>;
    getConfig: () => {
        [k: string]: ExpressHandlerOption<any>;
    };
    setConfig: (handler_name: string, option: Partial<ExpressHandlerOption<any>>) => any;
}
